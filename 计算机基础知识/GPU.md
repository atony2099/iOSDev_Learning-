---
title: GPU
date: 2015-03-29 12:38:30
tags: 
---



#### 文章来源: [GPU是如何工作的？](http://mt.sohu.com/20160822/n465388684.shtml) 

[GPU是如何工作的](http://www.360doc.com/content/13/0106/18/3267996_258608632.shtml)



渲染:使用GPU处理数据，输出可以显示的格式

光栅化:将矢量图形转换为像素点的过程 

即是将矢量图形转换为位图(由像素点组成的图形)

![](https://pic4.zhimg.com/37b99f0d42dfc4b15468b873c1b6b487_b.jpg)



GPU图形处理，可以大致分成 5 个步骤，如下图箭头的部分。分别为 vertex shader、primitive processing、rasterisation、fragment shader、testing and blending。

![img](http://img.mp.itc.cn/upload/20160822/c133024af8984192a98334c820b52050_th.jpeg)

　　三维座标绘图并产生屏幕输出的图形

**第一步**，vertex shader。是将三维空间中数个（x,y,z）顶点放进 GPU 中。在这一步骤中，电脑会在内部模拟出一个三维空间，并将这些顶点放置在这一空间内部。接着，投影在同一平面上，也是我们将看到的画面。同时，存下各点距离投影面的垂直距离，以便做后续的处理。

这个过程就像是本地球观看星星一般。地球的天空，就像是一个投影面，所有的星星，不管远近皆投影在同一面上。本地球的我们，抬起头来观看星星，分不出星星的远近，只能分辨出亮度。GPU 所投影出的结果，和这个情况类似。

![img](http://img.mp.itc.cn/upload/20160822/156b2c1a964e44c7a3318251da8a3771_th.jpeg)

　　从地球所看到的星空，星星就像是投影到一球面上，除非使用特别的仪器，不然分不出星星和地球的距离

**第二步**，primitive processing。是将相关的点链接在一起，以形成图形。在一开始输入数个顶点进入 GPU 时，程序会特别注记哪些点是需要组合在一起，以形成一线或面。就像是看星座的时候一样，将相关连的星星连起来，形成特定的图案。

**第三步**，rasterisation。因为电脑的屏幕是由一个又一个的像素组成，因此，需要将一条连续的直线，使用绘图的演算法，以方格绘出该直线。图形也是以此方式，先标出边线，再用方格填满整个平面。

**第四步**，fragment shader。将格点化后的图形着上颜色。所需着上的颜色也是于输入时便被注记。在游玩游戏时，这一步相当耗费 GPU 的计算资源，因为光影的效果、物体表面材质皆是在这一步进行，这些计算决定着游戏画面的精细程度。因此在游玩游戏时，调高游戏画面品质大幅增加这一步的计算负担，降低游戏品质。

![img](http://img.mp.itc.cn/upload/20160822/e12b16c48ec84e64a751b9cd855d6c8d.jpeg)

　　将一个三角形，用方格呈现近似原始图案，并着上颜色。一块又一块的方格，就是显示器上的像素

**最后一步**，testing and blending。便是将第一步所获得的投影垂直距离取出，和第四步的结果一同做最后处理。在去除被会被其他较近距离的物体挡住的物体后，让剩下的图形放进 GPU 的输出内存。之后，结果便会被送到电脑屏幕显示。

![](http://image58.360doc.com/DownloadImg/2013/01/0618/29425927_1.png)



