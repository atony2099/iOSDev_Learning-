---
title: 进程和线程理解
date: 2016-2-03 15:13:11
tags:
---

[上下文切换详解](http://ifeve.com/context-switch-definition/)

[操作系统中的进程与线程](http://www.cnblogs.com/CareySon/archive/2012/05/04/ProcessAndThread.html)

[对Linux内核中进程上下文和中断上下文的理解](http://www.embedu.org/Column/Column240.htm)

[编程思想之多线程与多进程(1)——以操作系统的角度述说线程与进程](http://blog.csdn.net/luoweifu/article/details/46595285)


## 理解进程

![](http://img.blog.csdn.net/20150623201226625?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbHVvd2VpZnU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

大部分操作系统任务调度是采用时间片轮转的抢占式调度方式，一个任务执行一段时间后强制停止停止切换到下一个任务,同一时间点只执行一个任务，时间片的切换非常短，给人的感觉多个任务在同时执行，这也就是人们通常说的**并发**

早期的操作系统并没有线程的概念，任务调度的基本单位就是**进程**，进程就是拥有资源和执行任务的基本单位

进程由代码，数据集合和进程控制块三部分组成，描述一个具有独立功能的程序的程序的一次执行过程


> 由于采用时间片轮转的调度方式，进程在执行一段时间后必须进行切换，执行切换的时候，需要保持当前进程的状态，寄存器的值，堆栈内容， 以便下次改进程被重新执行后恢复，这一过程叫做进程的上下文切换，由于进程上下文切换开销很大，线程应运而生



## 线程 vs 进程

线程也叫轻量级进程((Lightweight Process)，一个进程由多个线程组成，线程是进程中代码不同的执行路径

进程：有独立的内存空间(代码，数据，进程空间，打开的文件)。

线程：共享进程空间,cpu调度的基本单位

![](http://img.blog.csdn.net/20150623201304175?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbHVvd2VpZnU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

## 进程的上下文切换
某一时间点，寄存器的值，进程的状态，堆栈中的内容就是进程的上下文，当发生进程调度时，进程切换就是上下文切换

进程= cup 加载 上下文 + cpu执行 + cpu保持上下文(到内存中)

在内存中检索一个进程的上下文并将其在cpu的寄存器恢复

跳转到程序计数器的值，并恢复该进程

挂起一个进程，将改进程的上下文存储于内存的某处

| 进程占有的资源                      | 线程占有的资源        |
| ---------------------------- | -------------- |
| 地址空间 全局变量 打开的文件 子进程 信号量 账户信息 | 栈 寄存器 状态 程序计数器 |


## 一些术语的理解
### 串行 VS 并发
串行：一个执行一个任务
并发：一个同时执行多个任务
